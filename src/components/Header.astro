---
const currentPath = Astro.url.pathname;
const links = [
  { href: '/', label: 'Home', mobileHidden: true },
  { href: '/calculator', label: 'Calculator', reload: true },
  { href: '/blog', label: 'Blog' },
  { href: 'https://peptiderestore.com?discount=DKE4PDRM', label: 'Shop', external: true },
];
---

<header class="relative z-20 border-b border-white/5">
  <nav class="max-w-5xl mx-auto px-4 py-3 sm:py-4 flex items-center justify-between">
    <a href="/" class="flex items-center gap-2 group shrink-0">
      <svg class="h-7 w-auto" viewBox="0 0 36 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs><linearGradient id="lg" x1="0" y1="0" x2="36" y2="32" gradientUnits="userSpaceOnUse"><stop stop-color="#a78bfa"/><stop offset=".5" stop-color="#38bdf8"/><stop offset="1" stop-color="#34d399"/></linearGradient></defs>
        <path d="M10 2H26Q34 2 34 10V16Q34 24 26 24H14L6 31L9 24H10Q2 24 2 16V10Q2 2 10 2Z" fill="url(#lg)" fill-opacity=".12" stroke="url(#lg)" stroke-width="1.2"/>
        <line x1="13.5" y1="15.5" x2="16.5" y2="11.5" stroke="white" stroke-opacity=".25" stroke-width="1.5" stroke-linecap="round"/>
        <line x1="19.5" y1="11.5" x2="22.5" y2="15.5" stroke="white" stroke-opacity=".25" stroke-width="1.5" stroke-linecap="round"/>
        <circle cx="12" cy="16.5" r="3" fill="#a78bfa"/><circle cx="18" cy="10.5" r="3" fill="#38bdf8"/><circle cx="24" cy="16.5" r="3" fill="#34d399"/>
      </svg>
      <span class="text-xl font-extrabold gradient-text tracking-tight group-hover:opacity-90 transition-opacity">PepTalk</span>
    </a>
    <div class="flex items-center gap-1 sm:gap-2">
      {links.map(link => (
        <a
          href={link.href}
          target={link.external ? '_blank' : undefined}
          rel={link.external ? 'noopener noreferrer' : undefined}
          data-astro-reload={link.reload || undefined}
          class:list={[
            'px-2.5 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap',
            currentPath === link.href || (link.href !== '/' && currentPath.startsWith(link.href))
              ? 'pill-active text-white'
              : 'text-gray-300 hover:text-white hover:bg-white/5',
            link.external && 'shop-btn text-white',
            link.mobileHidden && 'hidden sm:inline-block',
          ]}
        >
          {link.label}
          {link.external && <span class="ml-1">&rarr;</span>}
        </a>
      ))}
    </div>
  </nav>
</header>
